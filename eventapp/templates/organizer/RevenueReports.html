{% extends 'layout/base.html' %}
{% block title %}Báo Cáo Doanh Thu - EventHub{% endblock %}
{% block extra_css %}
<link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
{% endblock %}

{% block content %}
<div class="container mx-auto p-4">
  <h1 class="text-2xl font-bold mb-4">Báo Cáo Doanh Thu</h1>
  <div class="mb-4">
    <p class="text-lg font-bold">Tổng Doanh Thu: {{ "{:,.0f} đ".format(total_revenue) }}</p>
  </div>
  {% if stats %}
  <div class="overflow-x-auto">
    <table class="w-full border-collapse">
      <thead>
        <tr class="bg-gray-100">
          <th class="p-2">ID Sự Kiện</th>
          <th class="p-2">Tiêu Đề</th>
          <th class="p-2">Tổng Vé</th>
          <th class="p-2">Vé Đã Bán</th>
          <th class="p-2">Vé Còn Lại</th>
          <th class="p-2">Doanh Thu</th>
        </tr>
      </thead>
      <tbody>
        {% for stat in stats %}
        <tr class="border-b border-gray-200 hover:bg-gray-50">
          <td class="p-2">{{ stat.event_id }}</td>
          <td class="p-2">{{ stat.title }}</td>
          <td class="p-2">{{ stat.total_tickets }}</td>
          <td class="p-2">{{ stat.sold_tickets }}</td>
          <td class="p-2">{{ stat.available_tickets }}</td>
          <td class="p-2">{{ "{:,.0f} đ".format(stat.revenue) }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  {% else %}
  <p>Không có dữ liệu doanh thu.</p>
  {% endif %}
  <a href="{{ url_for('organizer_my_events') }}" class="bg-gray-300 text-black px-4 py-2 rounded mt-4 inline-block">Quay Lại</a>
</div>
{% endblock %}